<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Race Ratings</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Race Ratings</h1>
    </header>
    <main>
        <table id="ratingsTable">
            <thead>
                <tr>
                    <th>Time</th>
                    <th>Track</th>
                    <th>Weight</th>
                    <th>Horse Name</th>
                    <th>L3 AVG</th>
                    <th>1LR</th>
                    <th>2LR</th>
                    <th>3LR</th>
                    <th>4LR</th>
                    <th>5LR</th>
                    <th>6LR</th>
                    <th>Best</th>
                    <th>OR</th>
                    <th>OR/BEST Diff</th>
                    <th>LWIN OR</th>
                </tr>
            </thead>
            <tbody id="ratingsBody">
                <!-- Ratings will be inserted here -->
            </tbody>
        </table>
        <button onclick="window.history.back()">Back to Homepage</button>
    </main>
    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const track = urlParams.get('track');
        const time = urlParams.get('time');

        // Load ratings based on track and time
        const ratingsBody = document.getElementById('ratingsBody');
        const raceData = JSON.parse(localStorage.getItem('raceData')) || [];

        raceData.forEach(row => {
            if (row[1] === track && row[0] === time) {
                const newRow = document.createElement('tr');
                row.forEach(cell => {
                    const newCell = document.createElement('td');
                    newCell.textContent = cell; // Display cell content
                    newRow.appendChild(newCell);
                });
                ratingsBody.appendChild(newRow); // Append the row to the table body
            }
        });

        if (ratingsBody.innerHTML === '') {
            ratingsBody.innerHTML = '<tr><td colspan="15">No ratings found for this race.</td></tr>';
        }
    </script>
</body>
</html>
